<div class="stripe">
  <div class="stripe-content">
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
    <span
      >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
        class="highlight">ismétlünk.</span
      >&nbsp;&nbsp;&nbsp;</span
    >
  </div>
</div>

<script>
  // Stripe scroll animation
  const stripeContent = document.querySelector(
    ".stripe-container .stripe-content",
  ) as HTMLElement;
  const container = document.querySelector(".stripe-container") as HTMLElement;
  let lastScroll = window.scrollY;
  let translateX = 0;

  if (stripeContent && container) {
    // Calculate the width of one repetition (one span element)
    const singleSpan = stripeContent.querySelector("span");
    const spanWidth = singleSpan ? singleSpan.offsetWidth : 0;

    // Initialize with offset to ensure content is visible
    translateX = -spanWidth;
    stripeContent.style.transform = `translateX(${translateX}px)`;

    window.addEventListener("scroll", () => {
      const currentScroll = window.scrollY;
      const scrollDelta = currentScroll - lastScroll;

      // Check if container is in viewport
      const rect = container.getBoundingClientRect();
      const isInView = rect.top < window.innerHeight && rect.bottom > 0;

      if (isInView) {
        // Update translateX based on scroll direction
        translateX -= scrollDelta * 0.5; // Adjust multiplier for speed

        // Seamless looping - reset when one full span has scrolled past
        // This keeps the animation within a safe range
        while (translateX <= -spanWidth * 2) {
          translateX += spanWidth;
        }
        while (translateX > -spanWidth) {
          translateX -= spanWidth;
        }

        stripeContent.style.transform = `translateX(${translateX}px)`;
      }

      lastScroll = currentScroll;
    });
  }
</script>

<style>
  .stripe {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 80px;
    overflow: hidden;
    display: flex;
    align-items: center;
    z-index: 40;
    /* background: #2b2a33; */
  }

  .stripe-content {
    font-family: "Kepler";
    font-weight: 400;
    display: flex;
    white-space: nowrap;
    font-size: var(--header-sm2);
    letter-spacing: 2px;
    will-change: transform;
    color: white;
  }

  .stripe-content span {
    display: inline-block;
  }

  .stripe-content .highlight {
    color: #dbe120;
  }

  @media (max-height: 500px) {
    .stripe-content {
      font-size: 1.5rem;
      letter-spacing: 0px;
    }
  }

  @media (max-width: 768px) {
    .stripe-content {
      font-size: 1.5rem;
      letter-spacing: 0px;
    }
  }
</style>
