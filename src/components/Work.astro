<div class="container work-container">
  <h2 class="workheader">
    Miért érdemes <br />
    <span class="workheader2">velünk</span> dolgoznod?
  </h2>
  <p class="workp">
    A Credo nem zsákbamacskát árul. Tapasztalat, rendszerben való stratégiai
    gondolkodás, vállalkozói szemlélet, pontos kivitelezés, és egy nagy kalap
    kreativitás.
  </p>
  <div class="holder">
    <div class="notus">
      <div class="notbutton">
        Amivel nálunk <br />
        <span class="bold">NEM</span> találkozhatsz:
      </div>
      <div class="no">
        <p>Folyamatos csúszás</p>
        <p>Elszürkülő figyelem</p>
        <p>Középszerű ötletek</p>
        <p>Légből kapott javaslatok</p>
      </div>
    </div>

    <div class="yesus">
      <div class="yesbutton">
        Amivel viszont
        <span class="bold">GARANTÁLTAN:</span>
      </div>
      <div class="no">
        <div>
          <img src="icons/yes1.svg" alt="yes1" /> Stratégiai gondolkodás – már az
          első megbeszéléstől fogva
        </div>
        <div>
          <img src="icons/yes2.svg" alt="yes2" />
          Analitikus szemlélet – mert minden, amit csinálunk, mérhetően működik
        </div>
        <div>
          <img src="icons/yes3.svg" alt="yes3" />
          Megvalósítási fegyelem – pontos határidők, kiszámíthatóság, tervezhetőség
        </div>
        <div>
          <img src="icons/yes4.svg" alt="yes4" />
          Proaktív, ügyfélcentrikus hozzáállás – kommunikációs partner az üzleti problémákra
        </div>
      </div>
    </div>
  </div>

  <div class="stripe">
    <div class="stripe-content">
      <span
        >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
          class="highlight">ismétlünk.</span
        >&nbsp;&nbsp;&nbsp;</span
      >
      <span
        >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
          class="highlight">ismétlünk.</span
        >&nbsp;&nbsp;&nbsp;</span
      >
      <span
        >felmérünk.&nbsp;&nbsp;&nbsp;tervezünk.&nbsp;&nbsp;&nbsp;alkotunk.&nbsp;&nbsp;&nbsp;tesztelünk.&nbsp;&nbsp;&nbsp;optimalizálunk.&nbsp;&nbsp;&nbsp;<span
          class="highlight">ismétlünk.</span
        >&nbsp;&nbsp;&nbsp;</span
      >
    </div>
  </div>
</div>

<script>
  import { animate, onScroll, createTimeline } from "animejs";

  if (window.innerWidth < 768) {
    animate(".workheader", {
      opacity: [0, 1],
      translateY: [30, 0],
      ease: "inOutSine",
      duration: 600,
      autoplay: onScroll({
        enter: "bottom-=150 top",
        leave: "top bottom",
        sync: "play reverse",
      }),
    });

    animate(".workp", {
      opacity: [0, 1],
      translateY: [30, 0],
      ease: "inOutSine",
      duration: 600,
      autoplay: onScroll({
        enter: "bottom-=150 top",
        leave: "top bottom",
        sync: "play reverse",
      }),
    });
  } else if (window.innerHeight < 800) {
    animate(".workheader", {
      opacity: [0, 1],
      translateY: [30, 0],
      ease: "inOutSine",
      duration: 600,
      autoplay: onScroll({
        enter: "bottom-=150 top",
        leave: "top bottom",
        sync: "play reverse",
      }),
    });

    animate(".workp", {
      opacity: [0, 1],
      translateY: [30, 0],
      ease: "inOutSine",
      duration: 600,
      autoplay: onScroll({
        enter: "bottom-=0 top",
        leave: "top bottom",
        sync: "play reverse",
      }),
    });
  } else {
    animate(".workheader", {
      opacity: [0, 1],
      translateY: [30, 0],
      ease: "inOutSine",
      duration: 600,
      autoplay: onScroll({
        enter: "bottom-=250 top",
        leave: "top bottom",
        sync: "play reverse",
      }),
    });

    animate(".workp", {
      opacity: [0, 1],
      translateY: [30, 0],
      ease: "inOutSine",
      duration: 600,
      autoplay: onScroll({
        enter: "bottom-=50 top",
        leave: "top bottom",
        sync: "play reverse",
      }),
    });
  }

  // Notus to Yesus animation sequence
  const notusContainer = document.querySelector(".notus");

  if (notusContainer) {
    // Create timeline for the sequence
    const tl = createTimeline({
      loop: false,
      autoplay: false,
      defaults: {
        ease: "inOutSine",
      },
    });

    // Step 1: Strikethrough animation for each p tag
    const notusParagraphs = document.querySelectorAll(".notus .no p");
    notusParagraphs.forEach((p, i) => {
      tl.add(
        p,
        {
          textDecoration: ["none", "line-through"],
          textDecorationColor: "#dbe120",
          textDecorationThickness: "3px",
          duration: 200,
        },
        i * 450,
      );
    });

    // Step 2: Fade out notus elements
    tl.add([...notusParagraphs, document.querySelector(".notbutton")], {
      opacity: [1, 0],
      duration: 600,
    });

    // Step 3: Fade in yesus
    tl.add(".yesus", {
      opacity: [0, 1],
      duration: 1000,
    });

    // Attach scroll trigger
    if (window.innerWidth < 768) {
      onScroll({
        target: notusContainer,
        enter: "bottom-=300 top",
        leave: "top bottom",
        onEnter: () => {
          tl.play();
        },
        onLeave: () => {
          tl.reverse();
        },
      });
    } else if (window.innerHeight < 800) {
      onScroll({
        target: notusContainer,
        enter: "bottom-=200 top",
        leave: "top bottom",
        onEnter: () => {
          tl.play();
        },
        onLeave: () => {
          tl.reverse();
        },
      });
    } else if (window.innerHeight < 500) {
      onScroll({
        target: notusContainer,
        enter: "bottom-=300 top",
        leave: "top bottom",
        onEnter: () => {
          tl.play();
        },
        onLeave: () => {
          tl.reverse();
        },
      });
    } else {
      onScroll({
        target: notusContainer,
        enter: "bottom-=450 top",
        leave: "top bottom",
        onEnter: () => {
          tl.play();
        },
        onLeave: () => {
          tl.reverse();
        },
      });
    }
  }

  // Stripe scroll animation
  const stripeContent = document.querySelector(
    ".work-container .stripe-content",
  ) as HTMLElement;
  const container = document.querySelector(".work-container") as HTMLElement;
  let lastScroll = window.scrollY;
  let translateX = 0;

  if (stripeContent && container) {
    // Calculate the width of one repetition (one span element)
    const singleSpan = stripeContent.querySelector("span");
    const spanWidth = singleSpan ? singleSpan.offsetWidth : 0;

    window.addEventListener("scroll", () => {
      const currentScroll = window.scrollY;
      const scrollDelta = currentScroll - lastScroll;

      // Check if container is in viewport
      const rect = container.getBoundingClientRect();
      const isInView = rect.top < window.innerHeight && rect.bottom > 0;

      if (isInView) {
        // Update translateX based on scroll direction
        translateX -= scrollDelta * 0.5; // Adjust multiplier for speed

        // Loop the animation - reset when one full span has scrolled past
        if (translateX <= -spanWidth) {
          translateX += spanWidth;
        } else if (translateX > 0) {
          translateX -= spanWidth;
        }

        stripeContent.style.transform = `translateX(${translateX}px)`;
      }

      lastScroll = currentScroll;
    });
  }
</script>
<style>
  .container {
    height: 100%;
    width: 100vw;
    background: #2b2a33;
    background: radial-gradient(
      circle,
      rgba(43, 42, 51, 1) 0%,
      rgba(0, 0, 0, 1) 86%
    );
    padding: 150px 0px;
    display: flex;
    flex-direction: column;
    justify-content: start;
    place-items: center;
    font-family: "AktivGrotesk Light";
    color: white;
    position: relative;
    z-index: 10;
    /*  padding-left: 15%; */
    padding-bottom: 15rem;
  }
  .workheader {
    font-size: var(--header-lg);
    text-align: center;
    line-height: var(--header-lg);
    margin: 0;
    font-weight: 400;
    z-index: 30;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }

  .workheader2 {
    font-family: "Kepler";
    font-size: var(--header-xl);
    letter-spacing: -4px;
    font-weight: 400;
    margin: 0;
    z-index: 30;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }

  p {
    margin-top: 40px;
    margin-left: 0rem;
    line-height: var(--30px);
    width: 800px;
    text-align: center;
  }

  .stripe {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 80px;
    overflow: hidden;
    display: flex;
    align-items: center;
    z-index: 40;
    /* background: #2b2a33; */
  }

  .stripe-content {
    font-family: "Kepler";
    font-weight: 400;
    display: flex;
    white-space: nowrap;
    font-size: 2.333rem;
    letter-spacing: 2px;
    will-change: transform;
    color: white;
  }

  .stripe-content span {
    display: inline-block;
  }

  .stripe-content .highlight {
    color: #dbe120;
  }

  .notbutton {
    background: #dbe120;
    color: #1c1b22;
    border: none;
    border-radius: 40px;
    padding: 12px 80px;
    font-family: "AktivGrotesk Light";
    font-size: var(--text-md);
    text-transform: uppercase;
    margin-top: 30px;
    font-weight: 600;
    width: 350px;
    letter-spacing: 1px;
    line-height: 27px;
    box-shadow: 0 0 20px rgba(13, 10, 27, 0.5);
    transition: all 0.3s ease;
    text-align: center;
    text-transform: uppercase;
  }
  .yesbutton {
    background: #9db6df;
    color: #1c1b22;
    border: none;
    border-radius: 40px;
    padding: 20px 80px;
    font-family: "AktivGrotesk Light";
    font-size: var(--text-md);
    text-transform: uppercase;
    margin-top: 30px;
    width: 350px;
    font-weight: 600;
    letter-spacing: 1px;
    box-shadow: 0 0 20px rgba(13, 10, 27, 0.5);
    transition: all 0.3s ease;
    text-align: center;
    text-transform: uppercase;
    gap: 10px;
    margin-bottom: 20px;
  }
  .bold {
    font-family: "AktivGrotesk Bold";
    letter-spacing: 0px;
  }
  .notus {
    display: flex;
    justify-content: center;
    place-items: center;
    flex-direction: column;
    position: relative;
  }
  .holder {
    position: relative;
    display: flex;
    place-items: center;
    justify-content: center;
  }
  .yesus {
    display: flex;
    justify-content: center;
    place-items: center;
    flex-direction: column;
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0%;
    width: 100%;
  }
  .no {
    display: flex;
    justify-content: center;
    place-items: start;
    flex-direction: column;
    gap: 30px;
    margin-top: 50px;
    font-size: var(--text-md);
  }
  .no div,
  .no p {
    margin: 0;
    font-size: var(--text-md);
  }
  .no div {
    display: flex;
    justify-content: center;
    place-items: center;
    gap: 10px;
    margin-left: 50px;
    font-size: var(--text-md);
  }
  @media (max-height: 800px) {
    .workheader {
      font-size: var(--header-md);
    }
    .workheader2 {
      font-size: var(--header-lg);
    }
    p {
      width: 600px;
      font-size: var(--text-base);
    }
    .no {
      gap: 25px;
    }
    .container {
      padding-bottom: 10rem;
    }
    .stripe-content {
      font-size: var(--text-lg);
      letter-spacing: 0px;
    }
  }
  @media (max-height: 500px) {
    .workheader {
      font-size: var(--header-sm);
      line-height: 4rem;
    }
    .workheader2 {
      font-size: var(--header-md);
    }
    .no div,
    .no p {
      font-size: var(--text-base);
    }
    .no {
      gap: 15px;
      margin-top: 20px;
    }
    .notbutton {
      font-size: var(--text-base);
      padding: 10px 20px;
      width: 350px;
      letter-spacing: 1px;
      line-height: 1.3rem;
      margin-bottom: 0;
    }
    .yesbutton {
      font-size: var(--text-base);
      padding: 15px 20px;
      width: 350px;
      letter-spacing: 1px;
      line-height: 1.6rem;
    }
  }
  @media (max-width: 1000px) {
    .workheader {
      font-size: var(--header-md);
    }
    .workheader2 {
      font-size: var(--header-lg);
    }
    p {
      width: 600px;
      font-size: var(--text-base);
    }
  }
  @media (max-width: 768px) {
    .workheader {
      font-size: calc(var(--header-sm) - 0.417rem);
      line-height: var(--header-sm);
    }
    .workheader2 {
      font-size: var(--header-sm);
      letter-spacing: -2px;
    }
    p {
      width: 80%;
      font-size: var(--text-sm);
    }
    .stripe-content {
      font-size: var(--text-lg);
      letter-spacing: 0px;
    }
    .container {
      padding: 70px 0px;
      height: 750px;
    }
    .notbutton {
      background: #dbe120;
      color: #1c1b22;
      border: none;
      border-radius: 40px;
      padding: 10px 40px;
      font-family: "AktivGrotesk Light";
      font-size: var(--text-base);
      text-transform: uppercase;
      margin-top: 30px;
      font-weight: 600;
      width: 200px;
      letter-spacing: 1px;
      line-height: 20px;
      box-shadow: 0 0 20px rgba(13, 10, 26, 0.5);
      transition: all 0.3s ease;
      text-align: center;
      text-transform: uppercase;
    }
    .yesbutton {
      border-radius: 40px;
      padding: 10px 40px;
      font-family: "AktivGrotesk Light";
      font-size: var(--text-base);
      text-transform: uppercase;
      margin-top: 30px;
      width: 200px;
      font-weight: 600;
      letter-spacing: 1px;
      box-shadow: 0 0 20px rgba(13, 10, 27, 0.5);
      transition: all 0.3s ease;
      text-align: center;
      text-transform: uppercase;
      gap: 10px;
      margin-bottom: 20px;
    }
    .no {
      margin-top: 30px;
    }
    .no p {
      font-size: 0.75rem !important;
      line-height: 20px;
      width: 100%;
      margin-top: 0px;
    }
    .no div {
      margin-left: 0;
      font-size: var(--text-sm) !important;
      line-height: 20px;
    }
  }
</style>
